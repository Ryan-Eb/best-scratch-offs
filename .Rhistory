group_by(scrape_date) %>%
summarise(dollar_spend_per_day = sum(dollar_per_day))
library(tidyverse)
library(lubridate)
library(rvest)
library(RSelenium)
binman::list_versions("chrome")
binman::list_versions("chromeveresion")
binman::list_versions("chromeversion")
binman::list_versions("chromedriver")
rs_driver_object <- rsDriver(browser = "chrome",
chromever = "106.0.5249.21")
remDr <- rs_driver_object$client
remDr$open
remDr$navigate("https://www.cnbc.com")
rs_driver_object <- rsDriver(browser = "chrome",
chromever = "106.0.5249.21")
remDr <- rs_driver_object$client
remDr$navigate("https://www.cnbc.com")
remDr <- rs_driver_object$client
"106.0.5249.21"
remDr <- driver[["client"]]
rs_driver_object <- rsDriver(remoteServerAddr = "localhost",
browser = "chrome",
chromever = "106.0.5249.21")
install.packages("netstat")
library(netstat)
rs_driver_object <- rsDriver(remoteServerAddr = "localhost",
browser = "chrome",
chromever = "106.0.5249.21",
port = free_port())
rs_driver_object <- rsDriver(browser = "chrome",
chromever = "106.0.5249.21",
port = free_port())
rs_driver_object <- rsDriver(browser = "chrome",
port = free_port())
rs_driver_object <- rsDriver(browser = "firefox",
port = free_port())
url <- read_html("https://www.michiganlottery.com/games/368-5000-frenzy-multiplier")
url %>% html_nodes("table")
url %>% html_nodes("table#payout-table")
url %>% html_attr()
url %>% html_attr("a")
url %>% html_node("a")
url %>% html_element("a")
url %>% html_element(class="payout-table")
?html_element
url %>% html_element("class")
url %>% html_element("innerText
")
url %>% html_children()
url %>% html_children("table")
url %>% html_children()
url %>% html_nodes("table")
url %>% html_nodes("a")
url %>% html_nodes("div")
url %>% html_nodes("div.msl-app")
url %>% html_nodes("div")
url %>% html_nodes("div") %>% html_text()
?lag
?source
source("/Users/jennaryan/Documents/GitHub/best-scratch-offs/fl_data_prep.R") %>% clean_df
library(tidyverse)
library(lubridate)
source("/Users/jennaryan/Documents/GitHub/best-scratch-offs/fl_data_prep.R") %>% clean_df
source("/Users/jennaryan/Documents/GitHub/best-scratch-offs/fl_data_prep.R")
library(tidyverse)
library(lubridate)
source("/Users/jennaryan/Documents/GitHub/best-scratch-offs/fl_data_prep.R")
fl_data <- clean_df
View(fl_data)
source("/Users/jennaryan/Documents/GitHub/best-scratch-offs/nc_data_prep.R")
View(clean_df)
nc_data <- clean_df
View(nc_data)
nc_data %>%
relocate(game_number:game_name, .before = prize_amount)
nc_data <- clean_df%>%
relocate(game_number:game_name, .before = prize_amount)
View(nc_data)
nc_data <- clean_df%>%
relocate(game_number:game_name, .before = prize_amount),
nc_data <- clean_df%>%
relocate(game_number:game_name, .before = prize_amount) %>%
relocate(ticket_price, .before = prize_amount)
View(nc_data)
nc_data <- clean_df%>%
relocate(game_number:game_name, .before = prize_amount) %>%
relocate(ticket_price, .before = prize_amount) %>%
select(-game_number_check)
View(nc_data)
source("/Users/jennaryan/Documents/GitHub/best-scratch-offs/fl_data_prep.R")
tickets_sold_df <- clean_df %>%
select(Game_number,Game_name,scrape_date,game_age,tickets_sold,ticket_cost,ticket_cost_num) %>%
group_by(scrape_date) %>%
distinct(Game_number, .keep_all = TRUE) %>%
arrange(Game_number,scrape_date) %>%
ungroup() %>%
group_by(Game_number) %>%
mutate(sold_since_last_scrape = tickets_sold - lag(tickets_sold)) %>%
mutate(days_since_last_scrape = as.numeric(scrape_date - lag(scrape_date))) %>%
mutate(tickets_per_day_since_last_scrape = sold_since_last_scrape/days_since_last_scrape) %>%
ungroup()
#most popular game today
tickets_sold_df %>%
filter(scrape_date == max(scrape_date)) %>%
arrange(desc(tickets_per_day_since_last_scrape)) %>%
.[1,] %>% view()
#most popular game today
tickets_sold_df %>%
filter(scrape_date == max(scrape_date)) %>%
arrange(desc(tickets_per_day_since_last_scrape)) %>%
.[1,]
#tickets sold per day since last scrape for each ticket amount
tickets_sold_df %>%
filter(scrape_date == max(scrape_date)) %>%
group_by(ticket_cost_num) %>%
summarise(tickets_sold_per_day = sum(tickets_per_day_since_last_scrape)) %>%
ungroup() %>%
mutate(total_dollar_spend_on_tickets = ticket_cost_num * tickets_sold_per_day)
#tickets sold per day total since last scrape
tickets_sold_df %>%
filter(scrape_date == max(scrape_date)) %>%
group_by(ticket_cost_num) %>%
summarise(tickets_sold_per_day = sum(tickets_per_day_since_last_scrape)) %>%
ungroup() %>%
mutate(total_dollar_spend_on_tickets = ticket_cost_num * tickets_sold_per_day) %>%
summarise(tickets_sold_per_day = sum(tickets_sold_per_day),
total_dollar_spend_on_tickets = sum(total_dollar_spend_on_tickets))
#total spend on scratch offs per day dataframe
#this will be interesting to track for seasonality, weekends, holidays, etc,...
tickets_sold_df %>%
drop_na() %>%
mutate(dollar_per_day = tickets_per_day_since_last_scrape * ticket_cost_num) %>%
group_by(scrape_date) %>%
summarise(dollar_spend_per_day = sum(dollar_per_day))
#plot of ticket spend per day for each ticket amount
tickets_sold_df %>%
drop_na() %>%
mutate(dollar_per_day = tickets_per_day_since_last_scrape * ticket_cost_num) %>%
group_by(ticket_cost_num,scrape_date) %>%
summarise(dollar_spend_per_day = sum(dollar_per_day)) %>%
ungroup() %>%
ggplot(aes(x = scrape_date, y = dollar_spend_per_day, color = as.factor(ticket_cost_num)))+
geom_line()+geom_point(aes(shape = as.factor(ticket_cost_num)))+
scale_y_continuous(labels = scales::dollar_format())
library(tidyverse)
library(lubridate)
library(rvest)
url <- read_html(https://www.calottery.com/scratchers/$5/get-into-the-music-1553)
url <- read_html("https://www.calottery.com/scratchers/$5/get-into-the-music-1553")
url %>% html_nodes("a")
url %>% html_nodes("td")
url %>% html_nodes("td") %>% html_table()
url %>% html_nodes("td") %>% html_text()
url %>% html_nodes("td") %>% html_text2()
url %>% html_nodes("td") %>% html_text2() %>% matrix(ncol = 3)
url %>% html_nodes("td") %>% html_text2() %>% matrix(ncol = 3, byrow = TRUE)
url %>% html_nodes("td") %>% html_table()
url %>% html_nodes("table") %>% html_table()
url %>% html_nodes("table") %>% html_table() %>%
.[3]
url %>% html_nodes("table") %>% html_table() %>%
str_split_fixed(" of ")
url %>% html_nodes("table") %>% html_table() %>%
str_split_fixed(" of ", n = 3)
url %>% html_nodes("table") %>% html_table() %>%
str_split_fixed(.[3]," of ", n = 3)
url %>% html_nodes("table") %>% html_table() %>%
str_split_fixed(.[3,]," of ", n = 3)
url %>% html_nodes("table") %>% html_table() %>%
str_split_fixed(.[,3]," of ", n = 3)
url %>% html_nodes("table") %>% html_table() %>%
.[3,]
url %>% html_nodes("table") %>% html_table() %>%
.[,3]
url %>% html_nodes("table") %>% html_table()
url %>% html_nodes("table") %>% html_table() %>% .[[1]]
url %>% html_nodes("table") %>% html_table() %>% .[[1]] %>%
str_split_fixed(.[3])
url %>% html_nodes("table") %>% html_table() %>% .[[1]] %>% .[3]
str_split_fixed(.[3], " of ", n = 3)
str_split_fixed([3], " of ", n = 3)
str_split_fixed(string = `Prizes Remaining`, " of ", n = 3)
url %>% html_nodes("table") %>% html_table() %>% .[[1]] %>% .[3]
url %>% html_nodes("table") %>% html_table() %>% .[[1]] %>%
str_split("of")
url %>% html_nodes("table") %>% html_table() %>% .[[1]] %>%
str_split("of", simplify=TRUE)
url %>% html_nodes("table") %>% html_table() %>% .[[1]] %>%
separate(`Prizes Remaining`, sep = " of ")
url %>% html_nodes("table") %>% html_table() %>% .[[1]] %>%
separate(`Prizes Remaining`, into = c(1,2,3),sep = " of ")
url %>% html_nodes("table") %>% html_table() %>% .[[1]] %>%
separate(`Prizes Remaining`, into = c("1","2","3"),sep = " of ")
url %>% html_nodes("table") %>% html_table() %>% .[[1]] %>%
separate(`Prizes Remaining`, into = c("1","2"),sep = " of ")
url %>% html_nodes("table") %>% html_table() %>% .[[1]] %>%
separate(`Prizes Remaining`, into = c("prize_remaning","total_prize"),sep = " of ")
url %>% html_nodes("table") %>% html_table() %>% .[[1]] %>%
separate(`Prizes Remaining`, into = c("prize_remaning","total_prize"),sep = " of ") %>%
mutate(game_number = url %>% html_nodes(".scratchers-game-detail__info-feature-item--game-number strong") %>% html_text2())
url %>% html_nodes("table") %>% html_table() %>% .[[1]] %>%
separate(`Prizes Remaining`, into = c("prize_remaning","total_prize"),sep = " of ") %>%
mutate(game_number = url %>% html_nodes(".scratchers-game-detail__info-feature-item--game-number strong") %>% html_text2()) %>%
mutate(start_overall_odds = url %>% html_nodes(".scratchers-game-detail__info-feature-item--overall-odds strong+ strong") %>% html_text2())
url %>% html_nodes("table") %>% html_table() %>% .[[1]] %>%
separate(`Prizes Remaining`, into = c("prize_remaning","total_prize"),sep = " of ") %>%
mutate(game_number = url %>% html_nodes(".scratchers-game-detail__info-feature-item--game-number strong") %>% html_text2()) %>%
mutate(start_overall_odds = url %>% html_nodes(".scratchers-game-detail__info-feature-item--overall-odds strong+ strong") %>% html_text2()) %>%
mutate(start_cash_odds = url %>% html_nodes(".scratchers-game-detail__info-feature-item--cash-odds strong+ strong") %>% html_text2())
url %>% html_nodes("table") %>% html_table() %>% .[[1]] %>%
separate(`Prizes Remaining`, into = c("prize_remaning","total_prize"),sep = " of ") %>%
mutate(game_number = url %>% html_nodes(".scratchers-game-detail__info-feature-item--game-number strong") %>% html_text2()) %>%
mutate(start_overall_odds = url %>% html_nodes(".scratchers-game-detail__info-feature-item--overall-odds strong+ strong") %>% html_text2()) %>%
mutate(start_cash_odds = url %>% html_nodes(".scratchers-game-detail__info-feature-item--cash-odds strong+ strong") %>% html_text2()) %>% view()
url %>% html_nodes("table") %>% html_table() %>% .[[1]] %>%
separate(`Prizes Remaining`, into = c("prize_remaning","total_prize"),sep = " of ") %>%
mutate(game_number = url %>% html_nodes(".scratchers-game-detail__info-feature-item--game-number strong") %>% html_text2()) %>%
mutate(start_overall_odds = url %>% html_nodes(".scratchers-game-detail__info-feature-item--overall-odds strong+ strong") %>% html_text2()) %>%
mutate(start_cash_odds = url %>% html_nodes(".scratchers-game-detail__info-feature-item--cash-odds strong+ strong") %>% html_text2()) %>%
mutate(start_cash_odds = url %>% html_nodes(".odds-available-prizes__header__copy--sub") %>% html_text2())
url %>% html_nodes("table") %>% html_table() %>% .[[1]] %>%
separate(`Prizes Remaining`, into = c("prize_remaning","total_prize"),sep = " of ") %>%
mutate(game_number = url %>% html_nodes(".scratchers-game-detail__info-feature-item--game-number strong") %>% html_text2()) %>%
mutate(start_overall_odds = url %>% html_nodes(".scratchers-game-detail__info-feature-item--overall-odds strong+ strong") %>% html_text2()) %>%
mutate(start_cash_odds = url %>% html_nodes(".scratchers-game-detail__info-feature-item--cash-odds strong+ strong") %>% html_text2()) %>%
mutate(start_cash_odds = url %>% html_nodes(".odds-available-prizes__header__copy--sub") %>% html_text2()) %>% view()
url %>% html_nodes("table") %>% html_table() %>% .[[1]] %>%
separate(`Prizes Remaining`, into = c("prize_remaning","total_prize"),sep = " of ") %>%
mutate(game_number = url %>% html_nodes(".scratchers-game-detail__info-feature-item--game-number strong") %>% html_text2()) %>%
mutate(start_overall_odds = url %>% html_nodes(".scratchers-game-detail__info-feature-item--overall-odds strong+ strong") %>% html_text2()) %>%
mutate(start_cash_odds = url %>% html_nodes(".scratchers-game-detail__info-feature-item--cash-odds strong+ strong") %>% html_text2()) %>%
mutate(start_cash_odds = url %>% html_nodes(".odds-available-prizes__header__copy--sub") %>% html_text2()) %>%
str_split("Last Updated") %>% .[2]
url %>% html_nodes("table") %>% html_table() %>% .[[1]] %>%
separate(`Prizes Remaining`, into = c("prize_remaning","total_prize"),sep = " of ") %>%
mutate(game_number = url %>% html_nodes(".scratchers-game-detail__info-feature-item--game-number strong") %>% html_text2()) %>%
mutate(start_overall_odds = url %>% html_nodes(".scratchers-game-detail__info-feature-item--overall-odds strong+ strong") %>% html_text2()) %>%
mutate(start_cash_odds = url %>% html_nodes(".scratchers-game-detail__info-feature-item--cash-odds strong+ strong") %>% html_text2()) %>%
mutate(start_cash_odds = url %>% html_nodes(".odds-available-prizes__header__copy--sub") %>% html_text2()) %>%
str_split("Last Updated", simplify = TRUE) %>% .[2]
url %>% html_nodes(".odds-available-prizes__header__copy--sub") %>% html_text2()) %>%
url %>% html_nodes(".odds-available-prizes__header__copy--sub") %>% html_text2() %>%
str_split("Last Updated", simplify = TRUE)
url %>% html_nodes(".odds-available-prizes__header__copy--sub") %>% html_text2() %>%
str_split("Last Updated", simplify = TRUE) %>% .[2]
url %>% html_nodes("table") %>% html_table() %>% .[[1]] %>%
separate(`Prizes Remaining`, into = c("prize_remaning","total_prize"),sep = " of ") %>%
mutate(game_number = url %>% html_nodes(".scratchers-game-detail__info-feature-item--game-number strong") %>% html_text2()) %>%
mutate(start_overall_odds = url %>% html_nodes(".scratchers-game-detail__info-feature-item--overall-odds strong+ strong") %>% html_text2()) %>%
mutate(start_cash_odds = url %>% html_nodes(".scratchers-game-detail__info-feature-item--cash-odds strong+ strong") %>% html_text2()) %>%
mutate(start_cash_odds = url %>% html_nodes(".odds-available-prizes__header__copy--sub") %>% html_text2() %>%
str_split("Last Updated ", simplify = TRUE) %>% .[2])
url %>% html_nodes("table") %>% html_table() %>% .[[1]] %>%
separate(`Prizes Remaining`, into = c("prize_remaning","total_prize"),sep = " of ") %>%
mutate(game_number = url %>% html_nodes(".scratchers-game-detail__info-feature-item--game-number strong") %>% html_text2()) %>%
mutate(start_overall_odds = url %>% html_nodes(".scratchers-game-detail__info-feature-item--overall-odds strong+ strong") %>% html_text2()) %>%
mutate(start_cash_odds = url %>% html_nodes(".scratchers-game-detail__info-feature-item--cash-odds strong+ strong") %>% html_text2()) %>%
mutate(start_cash_odds = url %>% html_nodes(".odds-available-prizes__header__copy--sub") %>% html_text2() %>%
str_split("Last Updated ", simplify = TRUE) %>% .[2]) %>% view()
read_html("https://www.calottery.com/scratchers") %>% html_node("a")
read_html("https://www.calottery.com/scratchers") %>% html_node("href")
read_html("https://www.calottery.com/scratchers") %>% html_node("a") %>% html_attr("href")
read_html("https://www.calottery.com/scratchers") %>% html_node()
read_html("https://www.calottery.com/scratchers") %>% html_nodes("a")
read_html("https://www.calottery.com/scratchers") %>% html_nodes("a") %>% html_attr("href")
read_html("https://www.calottery.com/scratchers#endTable") %>% html_nodes("a") %>% html_attr("href")
read_html("https://www.calottery.com/scratchers#endTable") %>% html_nodes("a") %>% html_attr("href")
read_html("https://www.calottery.com/scratchers") %>% html_nodes("a") %>% html_attr("href")
read_html("https://www.calottery.com/scratchers") %>% html_nodes("a")
read_html("https://www.calottery.com/scratchers") %>% html_nodes("a") %>% html_attrs("href")
read_html("https://www.calottery.com/scratchers") %>% html_nodes("a") %>% html_attr("href")
read_html("https://www.calottery.com/scratchers/$2") %>% html_nodes("a") %>% html_attr("href")
read_html("https://www.calottery.com/scratchers/$2") %>% html_nodes("#section-content-1-3 , .row") %>% html_attr("href")
read_html("https://www.calottery.com/scratchers/$2") %>% html_nodes("#section-content-1-3 , .row") %>% html_text2()
read_html("https://www.calottery.com/scratchers") %>% html_nodes("#section-content-1-3 , .row") %>% html_text2()
read_html("https://www.calottery.com/scratchers") %>% html_nodes("#section-content-1-3 , .row") %>% html_attr()
read_html("https://www.calottery.com/scratchers") %>% html_nodes("#section-content-1-3 , .row") %>% html_attr("href")
read_html("https://www.calottery.com/scratchers") %>% html_nodes("#section-content-1-3 , .row")
read_html("https://www.calottery.com/scratchers") %>% html_nodes("#section-content-1-3 , .row") %>% html_text2()
read_html("https://www.calottery.com/scratchers") %>% html_nodes(".table--font-uppercase) %>% html_text2()
read_html("https://www.calottery.com/scratchers") %>% html_nodes(".table--font-uppercase") %>% html_text2()
read_html("https://www.calottery.com/scratchers") %>% html_nodes(".table--font-uppercase") %>% html_text2()
read_html("https://www.calottery.com/scratchers") %>% html_nodes("table") %>% html_text2()
read_html("https://www.calottery.com/scratchers/scratchers-hub") %>% html_nodes("a") %>% html_attr("href")
read_html("https://www.calottery.com/scratchers/scratchers") %>% html_nodes("a") %>% html_attr("href")
read_html("https://www.calottery.com/scratchers") %>% html_nodes("a") %>% html_attr("href")
read_html("https://www.calottery.com/scratchers") %>% html_nodes("table)
read_html("https://www.calottery.com/scratchers") %>% html_nodes("table")
read_html("https://www.calottery.com/scratchers") %>% html_nodes("table")
url <- read_html("https://www.arizonalottery.com/scratchers/1367-hit-500/")
url %>% html_nodes("table") %>% html_table()
url %>% html_nodes("table") %>% html_table() %>% view()
url %>% html_nodes("td") %>% html_table() %>% view()
url %>% html_nodes("td") %>% html_text2() %>% view()
url %>% html_nodes("table")
url %>% html_nodes("table") %>% html_table()
url %>% html_nodes("table") %>% html_table()
url %>% html_nodes("tbody td") %>% html_table()
url %>% html_nodes("tbody td") %>% html_text()
url %>% html_nodes("td") %>% html_text()
url %>% html_nodes("table")
url %>% html_nodes("table") %>% html_element("id=prize-odd-chart"")
url %>% html_nodes("table") %>% html_element("id=prize-odd-chart")
url %>% html_nodes("table") %>% html_element(".prize-odd-chart")
url %>% html_nodes("table")
url %>% html_nodes("table") %>% html_element("#prize-odd-chart")
url %>% html_nodes("table")
url %>% html_nodes("table") %>% html_table()
url %>% html_nodes("table") %>% html_table()view()
url %>% html_nodes("table") %>% html_table() %>% view()
url <- read_html("https://www.walottery.com/Scratch/TopPrizesRemaining.aspx?price=$3")
url %>% html_nodes("table") %>% html_table()
library(tidyverse)
library(lubridate)
library(rvest)
url <- read_html("https://www.mslotteryhome.com/gamestatus/active/")
url %>% html_nodes("a") %>% html_attr("href")
url %>% html_nodes("a") %>% html_attr("href") %>% str_subset("instantgames")
game_list <- url %>% html_nodes("a") %>% html_attr("href") %>% str_subset("instantgames")
read_html(game_list[1]) %>% html_nodes("td") %>% html_table()
read_html(game_list[1]) %>% html_nodes("td") %>% html_text()
read_html(game_list[1]) %>% html_nodes("table")
read_html(game_list[1]) %>% html_nodes("td.has-text-align-center")
read_html(game_list[1]) %>% html_nodes("td.has-text-align-center") %>% html_table()
read_html(game_list[1]) %>% html_nodes("td.has-text-align-center") %>% html_text2()
read_html(game_list[1]) %>% html_nodes("td")
read_html(game_list[9]) %>% html_nodes("td")
read_html(game_list[9]) %>% html_nodes("td") %>% html_text2()
read_html(game_list[9]) %>% html_nodes("table")
read_html(game_list[9]) %>% html_nodes("table") %>% .[2]
read_html(game_list[9]) %>% html_nodes("table") %>% .[2] %>% html_table()
turl <- game_list[9]
turl %>% html_nodes("td")
read_html(turl) %>% html_nodes("td")
read_html(turl) %>% html_nodes("td") %>% html_text2()
read_html(turl) %>% html_nodes("table") %>% .[2] %>% html_table() %>%
mutate(game_number = read_html(turl) %>% html_nodes("td") %>% html_text2() %>% .[10])
read_html(turl) %>% html_nodes("table") %>% .[2] %>% html_table()
read_html(turl) %>% html_nodes("table") %>% .[2] %>% html_table() %>% .[[1]] %>%
mutate(game_number = read_html(turl) %>% html_nodes("td") %>% html_text2() %>% .[10])
read_html(turl) %>% html_nodes("td") %>% html_text2()
read_html(turl) %>% html_nodes("table") %>% .[2] %>% html_table() %>% .[[1]] %>%
mutate(game_number = read_html(turl) %>% html_nodes("td") %>% html_text2() %>% .[10],
ticket_price = read_html(turl) %>% html_nodes("td") %>% html_text2() %>% .[2],
start_date = read_html(turl) %>% html_nodes("td") %>% html_text2() %>% .[8],
start_overall_odds = read_html(turl) %>% html_nodes("td") %>% html_text2() %>% .[6]) %>%
mutate(game_name = read_html(turl) %>% html_nodes(".entry-title") %>% html_text2())
read_html(turl) %>% html_nodes("table") %>% .[2] %>% html_table() %>% .[[1]] %>%
mutate(game_number = read_html(turl) %>% html_nodes("td") %>% html_text2() %>% .[10],
ticket_price = read_html(turl) %>% html_nodes("td") %>% html_text2() %>% .[2],
start_date = read_html(turl) %>% html_nodes("td") %>% html_text2() %>% .[8],
start_overall_odds = read_html(turl) %>% html_nodes("td") %>% html_text2() %>% .[6]) %>%
mutate(game_name = read_html(turl) %>% html_nodes(".entry-title") %>% html_text2()) %>% view()
game_data <- data.frame()
for (i in game_list) {
turl <- game_list[i]
x<-read_html(turl) %>% html_nodes("table") %>% .[2] %>% html_table() %>% .[[1]] %>%
mutate(game_number = read_html(turl) %>% html_nodes("td") %>% html_text2() %>% .[10],
ticket_price = read_html(turl) %>% html_nodes("td") %>% html_text2() %>% .[2],
start_date = read_html(turl) %>% html_nodes("td") %>% html_text2() %>% .[8],
start_overall_odds = read_html(turl) %>% html_nodes("td") %>% html_text2() %>% .[6]) %>%
mutate(game_name = read_html(turl) %>% html_nodes(".entry-title") %>% html_text2())
game_data <- bind_rows(game_data,x)
print(i)
}
for (i in game_list) {
turl <- game_list[i]
x<-read_html(turl) %>% html_nodes("table") %>% .[2] %>% html_table() %>% .[[1]] %>%
mutate(game_number = read_html(turl) %>% html_nodes("td") %>% html_text2() %>% .[10],
ticket_price = read_html(turl) %>% html_nodes("td") %>% html_text2() %>% .[2],
start_date = read_html(turl) %>% html_nodes("td") %>% html_text2() %>% .[8],
start_overall_odds = read_html(turl) %>% html_nodes("td") %>% html_text2() %>% .[6]) %>%
mutate(game_name = read_html(turl) %>% html_nodes(".entry-title") %>% html_text2())
game_data <- bind_rows(game_data,x)
print(i)
}
game_data <- data.frame()
for (i in game_list) {
turl <- game_list[i]
x<-read_html(turl) %>% html_nodes("table") %>% .[2] %>% html_table() %>% .[[1]] %>%
mutate(game_number = read_html(turl) %>% html_nodes("td") %>% html_text2() %>% .[10],
ticket_price = read_html(turl) %>% html_nodes("td") %>% html_text2() %>% .[2],
start_date = read_html(turl) %>% html_nodes("td") %>% html_text2() %>% .[8],
start_overall_odds = read_html(turl) %>% html_nodes("td") %>% html_text2() %>% .[6]) %>%
mutate(game_name = read_html(turl) %>% html_nodes(".entry-title") %>% html_text2())
game_data <- bind_rows(game_data,x)
print(i)
}
url <- read_html("https://www.mslotteryhome.com/gamestatus/active/")
game_list <- url %>% html_nodes("a") %>% html_attr("href") %>% str_subset("instantgames")
game_data <- data.frame()
for (i in game_list) {
turl <- game_list[i]
x<-read_html(turl) %>% html_nodes("table") %>% .[2] %>% html_table() %>% .[[1]] %>%
mutate(game_number = read_html(turl) %>% html_nodes("td") %>% html_text2() %>% .[10],
ticket_price = read_html(turl) %>% html_nodes("td") %>% html_text2() %>% .[2],
start_date = read_html(turl) %>% html_nodes("td") %>% html_text2() %>% .[8],
start_overall_odds = read_html(turl) %>% html_nodes("td") %>% html_text2() %>% .[6]) %>%
mutate(game_name = read_html(turl) %>% html_nodes(".entry-title") %>% html_text2())
game_data <- bind_rows(game_data,x)
print(i)
}
for (i in 1:game_list) {
turl <- game_list[i]
x<-read_html(turl) %>% html_nodes("table") %>% .[2] %>% html_table() %>% .[[1]] %>%
mutate(game_number = read_html(turl) %>% html_nodes("td") %>% html_text2() %>% .[10],
ticket_price = read_html(turl) %>% html_nodes("td") %>% html_text2() %>% .[2],
start_date = read_html(turl) %>% html_nodes("td") %>% html_text2() %>% .[8],
start_overall_odds = read_html(turl) %>% html_nodes("td") %>% html_text2() %>% .[6]) %>%
mutate(game_name = read_html(turl) %>% html_nodes(".entry-title") %>% html_text2())
game_data <- bind_rows(game_data,x)
print(i)
}
game_data <- data.frame()
for (i in 1:game_list) {
turl <- game_list[i]
x<-read_html(turl) %>% html_nodes("table") %>% .[2] %>% html_table() %>% .[[1]] %>%
mutate(game_number = read_html(turl) %>% html_nodes("td") %>% html_text2() %>% .[10],
ticket_price = read_html(turl) %>% html_nodes("td") %>% html_text2() %>% .[2],
start_date = read_html(turl) %>% html_nodes("td") %>% html_text2() %>% .[8],
start_overall_odds = read_html(turl) %>% html_nodes("td") %>% html_text2() %>% .[6]) %>%
mutate(game_name = read_html(turl) %>% html_nodes(".entry-title") %>% html_text2())
game_data <- bind_rows(game_data,x)
print(i)
}
for (i in game_list) {
turl <- game_list[i]
x<-read_html(turl) %>% html_nodes("table") %>% .[2] %>% html_table() %>% .[[1]] %>%
mutate(game_number = read_html(turl) %>% html_nodes("td") %>% html_text2() %>% .[10],
ticket_price = read_html(turl) %>% html_nodes("td") %>% html_text2() %>% .[2],
start_date = read_html(turl) %>% html_nodes("td") %>% html_text2() %>% .[8],
start_overall_odds = read_html(turl) %>% html_nodes("td") %>% html_text2() %>% .[6]) %>%
mutate(game_name = read_html(turl) %>% html_nodes(".entry-title") %>% html_text2())
game_data <- bind_rows(game_data,x)
print(i)
}
game_list[1]
turl <- game_list[1]
game_data <- data.frame()
for (i in length(game_list)) {
turl <- game_list[i]
x<-read_html(turl) %>% html_nodes("table") %>% .[2] %>% html_table() %>% .[[1]] %>%
mutate(game_number = read_html(turl) %>% html_nodes("td") %>% html_text2() %>% .[10],
ticket_price = read_html(turl) %>% html_nodes("td") %>% html_text2() %>% .[2],
start_date = read_html(turl) %>% html_nodes("td") %>% html_text2() %>% .[8],
start_overall_odds = read_html(turl) %>% html_nodes("td") %>% html_text2() %>% .[6]) %>%
mutate(game_name = read_html(turl) %>% html_nodes(".entry-title") %>% html_text2())
game_data <- bind_rows(game_data,x)
print(i)
}
View(game_data)
game_data <- data.frame()
for (i in 1:length(game_list)) {
turl <- game_list[i]
x<-read_html(turl) %>% html_nodes("table") %>% .[2] %>% html_table() %>% .[[1]] %>%
mutate(game_number = read_html(turl) %>% html_nodes("td") %>% html_text2() %>% .[10],
ticket_price = read_html(turl) %>% html_nodes("td") %>% html_text2() %>% .[2],
start_date = read_html(turl) %>% html_nodes("td") %>% html_text2() %>% .[8],
start_overall_odds = read_html(turl) %>% html_nodes("td") %>% html_text2() %>% .[6]) %>%
mutate(game_name = read_html(turl) %>% html_nodes(".entry-title") %>% html_text2())
game_data <- bind_rows(game_data,x)
print(i)
}
View(game_data)
start <- Sys.time()
end <- sys.time()
end <- Sys.time()
print(end-start)
read_html(turl) %>% html_nodes("p.has-text-align-center") %>% html_text2()
read_html(turl) %>% html_nodes("p.has-text-align-center") %>% html_text2() %>% str_split("Last updated ", simplify = TRUE) %>% [2]
read_html(turl) %>% html_nodes("p.has-text-align-center") %>% html_text2() %>% str_split("Last updated ", simplify = TRUE) %>% .[2]
url <- read_html("https://www.mslotteryhome.com/gamestatus/active/")
game_list <- url %>% html_nodes("a") %>% html_attr("href") %>% str_subset("instantgames")
game_data <- data.frame()
for (i in 1:length(game_list)) {
start <- Sys.time()
turl <- game_list[i]
x<-read_html(turl) %>% html_nodes("table") %>% .[2] %>% html_table() %>% .[[1]] %>%
mutate(game_number = read_html(turl) %>% html_nodes("td") %>% html_text2() %>% .[10],
ticket_price = read_html(turl) %>% html_nodes("td") %>% html_text2() %>% .[2],
start_date = read_html(turl) %>% html_nodes("td") %>% html_text2() %>% .[8],
start_overall_odds = read_html(turl) %>% html_nodes("td") %>% html_text2() %>% .[6]) %>%
mutate(game_name = read_html(turl) %>% html_nodes(".entry-title") %>% html_text2(),
last_updated = read_html(turl) %>% html_nodes("p.has-text-align-center") %>% html_text2() %>% str_split("Last updated ", simplify = TRUE) %>% .[2]))
for (i in 1:length(game_list)) {
start <- Sys.time()
turl <- game_list[i]
x<-read_html(turl) %>% html_nodes("table") %>% .[2] %>% html_table() %>% .[[1]] %>%
mutate(game_number = read_html(turl) %>% html_nodes("td") %>% html_text2() %>% .[10],
ticket_price = read_html(turl) %>% html_nodes("td") %>% html_text2() %>% .[2],
start_date = read_html(turl) %>% html_nodes("td") %>% html_text2() %>% .[8],
start_overall_odds = read_html(turl) %>% html_nodes("td") %>% html_text2() %>% .[6]) %>%
mutate(game_name = read_html(turl) %>% html_nodes(".entry-title") %>% html_text2(),
last_updated = read_html(turl) %>% html_nodes("p.has-text-align-center") %>% html_text2() %>% str_split("Last updated ", simplify = TRUE) %>% .[2])
game_data <- bind_rows(game_data,x)
end <- Sys.time()
print(i)
print(end-start)
}
View(game_data)
distinct(game_data)
game_data <- distinct(game_data)
getwd
getwd()
game_data <- distinct(game_data, .keep_all = TRUE)
View(game_data)
#set working directory to ms lottery folder and write to csv with date of scrape
setwd("/Users/jennaryan/Documents/R Projects/ms lottery/daily_csv_ms")
write.csv(game_data,paste0("ms_scratch_prizes",today(),".csv"))
View(game_data)
